<router-outlet></router-outlet>

<ng-template #noMonitor >
  <p> Could not load monitor.</p>
</ng-template>
<ng-container *ngIf="!error && monitor; else noMonitor">
  <div id="title">
    <div id="monitor-info">
      <h2>{{monitor.name}}</h2>
    </div>
  
    <div id="button-container" *ngIf="'update' | able: 'monitor'">
      <button 
        mat-icon-button 
        color="warn"
        class=""
        (click)="onDelete()"
        matTooltip="Delete monitor"
        aria-label="Button that deletes the selected monitor"
      > 
      <mat-icon>delete</mat-icon>
    </button>
      <button 
        mat-flat-button 
        color="primary"
        class="add-btn"
        (click)="editMonitor()"
        matTooltip="Edit channel group"
        aria-label="Button that navigates to edit channel group page"
      > 
      Edit
    </button>
    </div>
  </div>
  <div id="monitor-container">
    <div id="monitor-detail" class="col">
      <h3>Configuration</h3>
      <div>
        <strong>Channel Group: </strong>{{monitor.channelGroup?.name}}
      </div>
      <div>
        <strong># of channels: </strong>{{monitor.numberChannels}}
      </div>
      <div>
        <strong>Metric: </strong>{{monitor.metric?.name}}
      </div>
      <div>
        <strong>Statistic:</strong>{{monitor.stat}}
      </div>
      <div>
        <strong>Interval type: </strong>{{monitor.intervalType}}
      </div>
      <div>
        <strong>Interval count: </strong>{{monitor.intervalCount}}
      </div>
      <p>Alarm will alert when the {{monitor.stat}} of {{monitor.metric?.name}} 
        for {{monitor.numberChannels}} channels in {{monitor.channelGroup?.name}} exceeds a threshold in </p>
    </div>
   
    <div id="monitor-triggers" class="col">
      <h3>Triggers</h3>
      <div *ngFor="let trigger of monitor.triggers">
        <span>Min: {{trigger.min}} </span>
        <span>Max: {{trigger.max}} </span>
        <span>Band Inclusive: {{trigger.bandInclusive}} </span>
        <span>Level: {{trigger.level}}</span>
      </div>
      <div *ngIf=!monitor.triggers>Missing trigger information</div>
    </div>
    <div id="monitor-chart" class="col">
      <h3>Alarm History</h3>
      <app-monitor-chart *ngIf="metric" [metric]="metric" [channelGroupId]="monitor.channelGroupId" [triggers]="monitor.triggers"></app-monitor-chart>
    </div>
  </div>
  
</ng-container>

