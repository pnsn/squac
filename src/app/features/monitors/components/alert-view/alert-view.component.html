<div id="title">
  <h1>
    Alert History
  </h1>

  <div id="button-container" >
    <button
      mat-icon-button
      aria-label="button that refreshes data"
      (click)="refresh()"><mat-icon>refresh</mat-icon></button>
    <a mat-button [routerLink]="[ '/monitors' ]">View All Monitors</a>
    <a mat-icon-button 
      color="primary"
      matTooltip="Notification Settings"
      [routerLink]="[ '/user/notifications' ]"
      aria-label="Button that navigates to notifications settings"
      ><mat-icon>settings</mat-icon></a>
    <a
      mat-flat-button
      color="accent"
      *ngIf="'update' | able: 'Monitor'"
      class="add-btn"
      [routerLink]="[ '/monitors', 'new' ]"
    >Create Monitor</a>
  </div>
</div>

  <div id="alerts" class="box">
    <ngx-datatable
      id="alert-table"
      class="material"
      [rows]="alerts"
      [columnMode]="ColumnMode.flex"
      [headerHeight]="30"
      [footerHeight]="50"
      [rowHeight]="23"
      [scrollbarV]="50"
      #alertTable
    >
    <ngx-datatable-column name="Status" prop="inAlarm" [draggable]="false"  [flexGrow]="0.5">
      <ng-template  let-value="value" ngx-datatable-cell-template>
        <span *ngIf="value; else notAlarm"><strong>In Alarm</strong></span>
        <ng-template #notAlarm><span>Not In Alarm</span></ng-template>
      </ng-template>
    </ngx-datatable-column>
      <ngx-datatable-column name="Time" prop="timestamp" [draggable]="false" [flexGrow]="0.5">
        <ng-template let-value="value" ngx-datatable-cell-template>
          {{ value | date:'short' }}
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="Monitor" prop="monitor" [draggable]="false" [flexGrow]="1">
        <ng-template let-value="value" ngx-datatable-cell-template>
          {{ value.name}}
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="Trigger" prop="trigger" [draggable]="false" [flexGrow]="1">
        <ng-template let-value="value" ngx-datatable-cell-template>
          Level: {{value.level}}
           {{value.bandInclusive? "inclusive" : "exclusive"}}
           min: {{value.min}}  max: {{value.max}} 
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="Message" [draggable]="false" [flexGrow]="2">

      </ngx-datatable-column>


<!-- click to show more detail -->
    </ngx-datatable>
  </div>
<router-outlet></router-outlet>
