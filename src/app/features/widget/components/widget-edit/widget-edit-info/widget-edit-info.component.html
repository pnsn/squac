<form action="" [formGroup]="widgetForm" (change)="checkValid()">
  <div class="label">Title:</div>
  <mat-form-field floatLabel="never" class="large">
    <input
      matInput
      type="text"
      id="name"
      formControlName="name"
      placeholder="Widget name"
      (change)="updateName()"
      required
    />
  </mat-form-field>
  <br />
  <div id="widget-type-container">
    <div class="label">Widget type:</div>
    <mat-button-toggle-group
      formControlName="type"
      (change)="updateType()"
      vertical="false"
    >
      <mat-button-toggle *ngFor="let type of widgetTypes" [value]="type.type">
        <div class="type-label">{{ type.name | titlecase }}</div>
      </mat-button-toggle>
    </mat-button-toggle-group>
  </div>
  <div id="type-container">
    <div id="stat-type-container" *ngIf="selectedType?.useAggregate">
      <div class="label">Select aggregation type:</div>
      <mat-form-field>
        <mat-label>Stat type</mat-label>
        <mat-select
          formControlName="stat"
          *ngIf="statTypes"
          (selectionChange)="updateStat()"
          required
        >
          <mat-option
            *ngFor="let statType of statTypes"
            [value]="statType.type"
          >
            {{ statType.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div id="description">
      <div class="label">Description:</div>
      <p *ngIf="selectedType; else selectWidget">
        {{ selectedType?.description }}
      </p>
      <ng-template #selectWidget>
        <p>Select a widget type.</p>
      </ng-template>
    </div>
  </div>
</form>
