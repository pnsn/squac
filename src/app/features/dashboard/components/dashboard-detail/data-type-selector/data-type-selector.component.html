<!-- <mat-form-field class="dense-form-field-select small" appearance="outline">
  <mat-label>Data Type</mat-label>
  <mat-select
    [(ngModel)]="type"
    (valueChange)="selectDataType($event)"
    placeholder="data type"
  >
    <mat-option value="raw"> raw data </mat-option>
    <mat-option value="day"> daily archive </mat-option>
    <mat-option value="month"> month archive </mat-option>
  </mat-select>
</mat-form-field>

<mat-form-field
  class="dense-form-field-select small"
  appearance="outline"
  floatLabel="always"
>
  <mat-label>Stat Type</mat-label>
  <mat-select
    [(ngModel)]="stat"
    [disabled]="type === 'raw'"
    (valueChange)="selectDataType($event)"
    placeholder="archive stat"
  >
    <mat-option *ngFor="let stat of statTypes" [value]="stat">
      {{ stat }}
    </mat-option>
  </mat-select>
</mat-form-field> -->

<mat-form-field class="dense-form-field-select" appearance="outline">
  <mat-label>Data Type</mat-label>
  <input
    matInput
    placeholder="data type"
    [matMenuTriggerFor]="dataTypeMenu"
    readonly
    [value]="displayString"
  />
</mat-form-field>
<mat-menu
  class="mat-menu-dense"
  #dataTypeMenu="matMenu"
  panelClass="stat-type-menu"
>
  <ng-container *ngFor="let type of dataTypes">
    <button
      [ngClass]="type.value === dataType ? 'active' : ''"
      *ngIf="type.value === 'raw'"
      mat-menu-item
      (click)="selectDataType(type, '')"
    >
      raw data
    </button>

    <button
      mat-menu-item
      [ngClass]="type.value === dataType ? 'active' : ''"
      *ngIf="type.value !== 'raw'"
      [matMenuTriggerFor]="statType"
      [matMenuTriggerData]="{ type }"
    >
      {{ type.full }}
    </button>
  </ng-container>
</mat-menu>

<mat-menu class="mat-menu-dense" #statType="matMenu" overlapTrigger="false">
  <ng-template matMenuContent let-type="type">
    <button mat-menu-item disabled readonly>
      {{ type.full }}
    </button>
    <button
      mat-menu-item
      *ngFor="let stat of statTypes"
      [ngClass]="type.value === dataType && stat === statType ? 'active' : ''"
      (click)="selectDataType(type, stat)"
    >
      {{ stat }}
    </button>
  </ng-template>
</mat-menu>
